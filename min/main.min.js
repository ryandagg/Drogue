var GameSpace=function(){var t=function(t,i){this.rows=i,this.columns=t,this.map=[],this.tileMatrixGenerator=function(){for(var t=0;t<this.rows;t++){for(var i=[],n=0;n<this.columns;n++)i.push(new o([n,t]));this.map.push(i)}console.log(this.map)},this.createMap=function(){this.tileMatrixGenerator()},this.createTerrain=function(){this.map[0][0]=new s([0,0])},this.drawMap=function(){$("#game-window").empty(),this.createMap(),this.createTerrain();var t=$("#game-window-template").html(),i=Handlebars.compile(t),o=this,n=0;Handlebars.registerHelper("columnCounter",function(){return n%o.columns}),Handlebars.registerHelper("rowCounter",function(){return n++,Math.floor(n/o.columns)}),$("#game-window").append(i(o))}},i=new t(60,40),o=function(t){this.location=t,this.icon="dot",this.text=".",this.class="dot"},n=function(){this.classCSS="impassable"};n.prototype=new o,n.prototype.constructor=n;var s=function(t){o.call(this,t),this.color="grey",this.icon="hash",this.text="#",this.class="wall"};s.prototype=new n,s.prototype.constructor=s;var e=function(){this.position=[Math.floor(i.columns/2),Math.floor(i.rows/2)],this.text="@",this.placeCharacter=function(){$("#column-"+String(this.position[0])+"-row-"+String(this.position[1])).append("<div id='character'>@</div>")},this.updateCharacterPosition=function(){$("#character").remove(),$("#column-"+String(this.position[0])+"-row-"+String(this.position[1])).append("<div id='character'>@</div>")},this.moveCharacter=function(t){108===t?this.position[0]++:104===t?this.position[0]--:106===t?this.position[1]++:107===t?this.position[1]--:117===t?(this.position[1]--,this.position[0]++):121===t?(this.position[1]--,this.position[0]--):110===t?(this.position[1]++,this.position[0]++):98===t&&(this.position[1]++,this.position[0]--),this.updateCharacterPosition()}},r=new e,a=function(){console.log("init called"),i.drawMap(),r.placeCharacter()};return{init:a,rogue:r}}();$(document).on("ready",function(){GameSpace.init(),$(document).keypress(function(t){GameSpace.rogue.moveCharacter(t.charCode)})});