var GameSpace=function(){var e=function(e,s){return a.map[r.y+s][r.x+e].impassable},s=function(s){if(108===s){var t=1,o=0;console.log(a.map[r.y][r.x+1].impassable),e(t,o)?$("#messages").text("You shall not pass!"):a.updateRogue(t,o)}else if(104===s){var t=-1,o=0;console.log(a.map[r.y][r.x-1].impassable),e(t,o)?$("#messages").text("You shall not pass!"):a.updateRogue(t,o)}else if(106===s){var t=0,o=1;console.log(a.map[r.y][r.x-1].impassable),e(t,o)?$("#messages").text("You shall not pass!"):a.updateRogue(t,o)}else if(107===s){var t=0,o=-1;console.log(a.map[r.y][r.x-1].impassable),e(t,o)?$("#messages").text("You shall not pass!"):a.updateRogue(t,o)}else if(117===s){var t=1,o=-1;console.log(a.map[r.y][r.x-1].impassable),e(t,o)?$("#messages").text("You shall not pass!"):a.updateRogue(t,o)}else if(121===s){var t=-1,o=-1;console.log(a.map[r.y][r.x-1].impassable),e(t,o)?$("#messages").text("You shall not pass!"):a.updateRogue(t,o)}else if(110===s){var t=1,o=1;console.log(a.map[r.y][r.x-1].impassable),e(t,o)?$("#messages").text("You shall not pass!"):a.updateRogue(t,o)}else if(98===s){var t=-1,o=1;console.log(a.map[r.y][r.x-1].impassable),e(t,o)?$("#messages").text("You shall not pass!"):a.updateRogue(t,o)}},t=function(e,s){this.rows=s,this.columns=e,this.map=[],this.tileMatrixGenerator=function(){for(var e=0;e<this.rows;e++){for(var s=[],t=0;t<this.columns;t++)s.push(new o([t,e]));this.map.push(s)}},this.createMap=function(){this.tileMatrixGenerator()},this.createTerrain=function(){for(var e=0;e<this.map.length;e++)for(var s=0;s<this.map[0].length;s++)0===e||e===this.rows-1?this.map[e][s]=new n([e,s]):(0===s||s===this.columns-1)&&(this.map[e][s]=new n(e,s))},this.placeCharacter=function(){this.map[r.y][r.x]=r},this.updateRogue=function(e,s){r.x+=e,r.y+=s,this.map[r.y][r.x]=r,this.map[r.y-s][r.x-e]=new o(r.x-e,r.y-s),this.drawMap()},this.drawMap=function(){$("#game-window").empty();var e=$("#game-window-template").html(),s=Handlebars.compile(e),t=this,a=0;Handlebars.registerHelper("columnCounter",function(){return a%t.columns}),Handlebars.registerHelper("rowCounter",function(){return a++,Math.floor(a/t.columns)}),$("#game-window").append(s(t))}},a=new t(60,40),o=function(e,s){this.x=e,this.y=s,this.location=[this.x,this.y],this.text=".",this.class="dot",this.impassable=!1},i=function(){};i.prototype=new o,i.prototype.constructor=i;var n=function(e){o.call(this,e),this.text="#",this.class="wall",this.impassable=!0};n.prototype=new i,n.prototype.constructor=n;var l=function(){this.x=Math.floor(a.columns/2),this.y=Math.floor(a.rows/2),this.location=[this.x,this.y],this.text="@",this.class="character"},r=new l,a=new t(60,40),p=function(){a.createMap(),a.createTerrain(),a.placeCharacter(),a.drawMap()};return{initialize:p,rogue:r,keyHandler:s}}();$(document).on("ready",function(){GameSpace.initialize(),$(document).keypress(function(e){GameSpace.keyHandler(e.charCode)})});