var GameSpace=function(){var t=function(t){return"#column-"+String(t[0])+"-row-"+String(t[1])},e=function(t,e){return o.map[u.y+e][u.x+t].impassable},s=function(t){if(108===t){var s=1,a=0;e(s,a)?$("#messages").text("You shall not pass!"):o.updateRogue(s,a)}else if(104===t){var s=-1,a=0;e(s,a)?$("#messages").text("You shall not pass!"):o.updateRogue(s,a)}else if(106===t){var s=0,a=1;e(s,a)?$("#messages").text("You shall not pass!"):o.updateRogue(s,a)}else if(107===t){var s=0,a=-1;e(s,a)?$("#messages").text("You shall not pass!"):o.updateRogue(s,a)}else if(117===t){var s=1,a=-1;e(s,a)?$("#messages").text("You shall not pass!"):o.updateRogue(s,a)}else if(121===t){var s=-1,a=-1;e(s,a)?$("#messages").text("You shall not pass!"):o.updateRogue(s,a)}else if(110===t){var s=1,a=1;e(s,a)?$("#messages").text("You shall not pass!"):o.updateRogue(s,a)}else if(98===t){var s=-1,a=1;e(s,a)?$("#messages").text("You shall not pass!"):o.updateRogue(s,a)}},a=function(e,s){this.rows=s,this.columns=e,this.map=[],this.tileMatrixGenerator=function(){for(var t=0;t<this.rows;t++){for(var e=[],s=0;s<this.columns;s++)e.push(new n([s,t]));this.map.push(e)}},this.createMap=function(){this.tileMatrixGenerator()},this.createTerrain=function(){for(var t=0;t<this.map.length;t++)for(var e=0;e<this.map[0].length;e++)0===t||t===this.rows-1?this.map[t][e]=new r([t,e]):(0===e||e===this.columns-1)&&(this.map[t][e]=new r(t,e))},this.placeCharacter=function(){this.map[u.y][u.x]=u},this.updateDisplay=function(e,s){$(t(e.location())).text(e.text),$(t(s.location())).text(s.text),$(t(s.location())).addClass(s.class),$(t(e.location())).addClass(e.class),$(t(e.location())).removeClass(s.class),$(t(s.location())).removeClass(e.class)},this.updateRogue=function(t,e){var s=new n(u.x,u.y);console.log(s.location()),u.x+=t,u.y+=e,this.map[u.y][u.x]=u,this.map[u.y-e][u.x-t]=s,console.log(u.location()),this.updateDisplay(u,s)},this.drawMap=function(){$("#game-window").empty();var t=$("#game-window-template").html(),e=Handlebars.compile(t),s=this,a=0;Handlebars.registerHelper("columnCounter",function(){return a%s.columns}),Handlebars.registerHelper("rowCounter",function(){return a++,Math.floor(a/s.columns)}),$("#game-window").append(e(s))}},o=new a(60,40),n=function(t,e){this.x=t,this.y=e,this.text=".",this.class="dot",this.impassable=!1};n.prototype.location=function(){return[this.x,this.y]};var i=function(){};i.prototype=new n,i.prototype.constructor=i;var r=function(t){n.call(this,t),this.text="#",this.class="wall",this.impassable=!0};r.prototype=new i,r.prototype.constructor=r;var l=function(){this.x=Math.floor(o.columns/2),this.y=Math.floor(o.rows/2),this.location=function(){return[this.x,this.y]},this.text="@",this.class="character"},u=new l,o=new a(60,40),c=function(){o.createMap(),o.createTerrain(),o.placeCharacter(),o.drawMap()};return{initialize:c,rogue:u,keyHandler:s}}();$(document).on("ready",function(){GameSpace.initialize(),$(document).keypress(function(t){GameSpace.keyHandler(t.charCode)})});